<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>

<style>
	.animate{
		position: relative;
		width: 200px;
		height: 200px;
		background-color: grey;
		left: 0px;
	}

</style>
<script>
var test= {};
var animate = function(object){
	for(let name in object){
		this[name] = object[name];
	}
	var speed;
	var node;
	var oringinPos;
	var self = this;
	var once = true;
	var timer;
	// oringinPos = (node.style.left==='')?0:parseInt(node.style.left)
	(function(el){node = document.querySelectorAll(el);})(self.el);
	var animate = function(ani_node,target){		
		ani_node.timer = setInterval(function(){
			var offsetleft = (ani_node.style.left==='')?0:parseInt(ani_node.style.left);
			speed = (target - offsetleft)/10;
			speed = speed<1?(speed<0?(speed<-1?speed:-1):1):speed;
			ani_node.style.left =offsetleft+ speed + 'px';
			test.speed= speed;
			test.offsetleft= offsetleft;
			test.target = target;
			 
			if (speed>0&&offsetleft >= target) {
				clearInterval(ani_node.timer);
			}else if(speed<0&&offsetleft <= target){
				clearInterval(ani_node.timer);
			}
		},10)
	}

	this.bind = function(){
		for(let num_node of node){
			ani_bind(num_node);
		}
		
	}
	var ani_bind = function(node){
		node.onmouseover = function(event){
			test.node = event.target ;
			if (once) {
				clearInterval(event.target.timer);
				animate(event.target,self.target);
				event.target.once=false;
			}			
		}
		node.onmouseout = function(event){
			console.log('out');
			event.target.once = true;	
			clearInterval(event.target.timer);
			animate(event.target,1);		
		}
	}
}

function ani1(){
	var test1= new animate({
		el:'.animate',
		target:100
	});
	test1.bind();
}
</script>
<body>
	<div class="animate"></div>
	<div class="animate"></div>
	<button onclick="ani1()">动画</button>
</body>
</html>